{{ define "title" }}
    Today I Learnt â€” David Winterbottom
{{ end }}

{{ define "header" }}
    <header id="banner-home">
        <h1>{{ .Site.Title }}</h1>
    </header>
{{ end }}

{{ define "description" }}
    A collection of TIL posts started in summer 2020.
{{ end }}

{{ define "main" }}

    <blockquote id="home_quote">
        <p>Every day is a school day</p>
        <footer>Me, every day ðŸ¤”</footer>
    </blockquote>

    {{ $posts := where site.RegularPages "Type" "in" "posts" }}

    <p>
        This is a catalogue of notable
        things <a href="https://codeinthehole.com">David Winterbottom</a>
        has learnt (since July 2020).
    </p>

    <!-- 
    Show recent tags
    ----------------
    We two slices to track the tag pages and their names. It's easier to
    check uniqueness using the name.
    -->
    {{ $recent_tag_pages := slice }}
    {{ $recent_tag_names := slice }}

    {{ $recent_posts := (first 4 $posts) }}
    {{ range $recent_posts }}
        {{ range .GetTerms "tags" }}
            {{ if not (in $recent_tag_names .Title) }}
                {{ $recent_tag_pages = $recent_tag_pages | append . }}
                {{ $recent_tag_names = $recent_tag_names | append .Title }}
            {{ end }}
        {{ end }}
    {{ end }}

    <p>
        There have been <strong>{{ len $posts }}</strong> TILs so far â€”
        recent topics include 
        {{ range $i, $p := $recent_tag_pages }}{{- if $i -}}, {{ end -}}<a href="{{ .RelPermalink }}">{{ .Title | markdownify }}</a>{{ end }}.
    </p>

    <p>
        Browse posts <a href="/posts/">by month</a> or <a href="/tags/">by tag</a>.
    </p>


    <h3>Recent learnings</h3>
    
    {{ partial "posts.html" (first 20 $posts) }}

    <h3>Other TIL sites</h3>
    <p>
        There's lots of good stuff in the TIL-o-sphere.
    </p>
    <ul>
        <li><a href="https://github.com/jbranchaud/til">jbranchaud/til</a></li>
        <li><a href="https://github.com/simonw/til">simonw/til</a></li>
        <li><a href="https://github.com/jwworth/til">jwworth/til</a></li>
        <li><a href="https://til.hashrocket.com/">Today I Learned by Hashrocket</a></li>
        <li><a href="https://github.com/thoughtbot/til">thoughtbot/til</a></li>
    </ul>

{{ end }}

{{ define "footer" }}
    <footer id="footer">
        This is a <a href="https://gohugo.io/">Hugo</a>-generated static site, hosted using <a href="https://pages.github.com/">Github Pages</a>.<br/>
        Source code available at: <a href="https://github.com/codeinthehole/til/">https://github.com/codeinthehole/til/</a>
    </footer>
{{ end }}
